const L={NONE:0,Paladin:19,Monk:20,Warrior:21,Dragoon:22,Bard:23,WhiteMage:24,BlackMage:25,Summoner:27,Scholar:28,Ninja:30,Machinist:31,DarkKnight:32,Astrologian:33,Samurai:34,RedMage:35,Gunbreaker:37,Dancer:38,Reaper:39,Sage:40},d={NONE:0,GLA:1,PGL:2,MRD:3,LNC:4,ARC:5,CNJ:6,THM:7,CRP:8,BSM:9,ARM:10,GSM:11,LTW:12,WVR:13,ALC:14,CUL:15,MIN:16,BTN:17,FSH:18,PLD:19,MNK:20,WAR:21,DRG:22,BRD:23,WHM:24,BLM:25,ACN:26,SMN:27,SCH:28,ROG:29,NIN:30,MCH:31,DRK:32,AST:33,SAM:34,RDM:35,BLU:36,GNB:37,DNC:38,RPR:39,SGE:40},S={NONE:{full:"无",simple2:"无",simple1:"无",en:"none"},GLA:{full:"剑术师",simple2:"剑术",simple1:"剑",en:"gladiator"},PGL:{full:"格斗家",simple2:"格斗",simple1:"斗",en:"pugilist"},MRD:{full:"斧术师",simple2:"斧术",simple1:"斧",en:"marauder"},LNC:{full:"枪术士",simple2:"枪术",simple1:"枪",en:"lancer"},ARC:{full:"弓箭手",simple2:"弓箭",simple1:"弓",en:"arcanist"},CNJ:{full:"幻术师",simple2:"幻术",simple1:"幻",en:"conjurer"},THM:{full:"咒术师",simple2:"咒术",simple1:"咒",en:"thaumaturge"},CRP:{full:"刻木匠",simple2:"刻木",simple1:"刻",en:"carpenter"},BSM:{full:"段铁匠",simple2:"段铁",simple1:"段",en:"blacksmith"},ARM:{full:"铸甲匠",simple2:"铸甲",simple1:"铸",en:"armorer"},GSM:{full:"雕金匠",simple2:"雕金",simple1:"雕",en:"goldsmith"},LTW:{full:"制革匠",simple2:"制革",simple1:"革",en:"leatherworker"},WVR:{full:"裁衣匠",simple2:"裁衣",simple1:"裁",en:"weaver"},ALC:{full:"炼金术师",simple2:"炼金",simple1:"炼",en:"alchemist"},CUL:{full:"烹调师",simple2:"烹调",simple1:"烹",en:"culinarian"},MIN:{full:"采矿工",simple2:"采矿",simple1:"采",en:"miner"},BTN:{full:"园艺工",simple2:"园艺",simple1:"园",en:"botanist"},FSH:{full:"捕鱼人",simple2:"捕鱼",simple1:"捕",en:"fisher"},PLD:{full:"骑士",simple2:"骑士",simple1:"骑 ",en:"paladin"},MNK:{full:"武僧",simple2:"武僧",simple1:"僧",en:"monk"},WAR:{full:"战士",simple2:"战士",simple1:"战",en:"warrior"},DRG:{full:"龙骑士",simple2:"龙骑",simple1:"龙",en:"dragoon"},BRD:{full:"吟游诗人",simple2:"诗人",simple1:"诗",en:"bard"},WHM:{full:"白魔法师",simple2:"白魔",simple1:"白",en:"whitemage"},BLM:{full:"黑魔法师",simple2:"黑魔",simple1:"黑",en:"blackmage"},ACN:{full:"秘术师",simple2:"秘术",simple1:"秘",en:"arcanist"},SMN:{full:"召唤师",simple2:"召唤",simple1:"召",en:"summoner"},SCH:{full:"学者",simple2:"学者",simple1:"学",en:"scholar"},ROG:{full:"双剑师",simple2:"双剑",simple1:"双",en:"rogue"},NIN:{full:"忍者",simple2:"忍者",simple1:"忍",en:"ninja"},MCH:{full:"机工士",simple2:"机工",simple1:"机",en:"machinist"},DRK:{full:"暗黑骑士",simple2:"暗骑",simple1:"暗",en:"darkknight"},AST:{full:"占星术士",simple2:"占星",simple1:"占",en:"astrologian"},SAM:{full:"武士",simple2:"武士",simple1:"武",en:"samurai"},RDM:{full:"赤魔法师",simple2:"赤魔",simple1:"赤",en:"redmage"},BLU:{full:"青魔法师",simple2:"青魔",simple1:"青",en:"bluemage"},GNB:{full:"绝枪战士",simple2:"绝枪",simple1:"绝",en:"gunbreaker"},DNC:{full:"舞者",simple2:"舞者",simple1:"舞",en:"dancer"},RPR:{full:"钐镰客",simple2:"钐镰",simple1:"镰",en:"reaper"},SGE:{full:"贤者",simple2:"贤者",simple1:"贤",en:"sage"}},R=Object.keys(d),I=["tank","healer","dps","crafter","gatherer","none"],r=["GLA","PLD","MRD","WAR","DRK","GNB"],m=["CNJ","WHM","SCH","AST","SGE"],p=["PGL","MNK","LNC","DRG","ROG","NIN","SAM","RPR"],u=["ARC","BRD","DNC","MCH"],g=["BLU","RDM","BLM","SMN","ACN","THM"],T=[...p,...u,...g],B=[...r,...m,...p,...u,...g],k=[...r,...m,...p,...u,...g,"NONE"],N=["CRP","BSM","ARM","GSM","LTW","WVR","ALC","CUL"],C=["MIN","BTN","FSH"],$=["BLU",...r,...p],G=["BLU",...r,...u],y=["BLM","BLU",...m],P=[...p],E=[...g],j=["BLU","BRD",...m],w=(()=>{const e=(l,s,i)=>{s.forEach(o=>l.set(o,i))},n=new Map([["NONE","none"]]);return e(n,r,"tank"),e(n,m,"healer"),e(n,T,"dps"),e(n,N,"crafter"),e(n,C,"gatherer"),n})(),H={jobEnumToJob:e=>R.find(l=>d[l]===e)??"NONE",jobToJobEnum:e=>d[e],jobToRole:e=>w.get(e)??"none",getAllRoles:()=>I,isTankJob:e=>r.includes(e),isHealerJob:e=>m.includes(e),isMeleeDpsJob:e=>p.includes(e),isRangedDpsJob:e=>u.includes(e),isCasterDpsJob:e=>g.includes(e),isDpsJob:e=>T.includes(e),isCraftingJob:e=>N.includes(e),isGatheringJob:e=>C.includes(e),isCombatJob:e=>!N.includes(e)&&!C.includes(e),canStun:e=>$.includes(e),canSilence:e=>G.includes(e),canSleep:e=>y.includes(e),canCleanse:e=>j.includes(e),canFeint:e=>P.includes(e),canAddle:e=>E.includes(e),getAllJobs:()=>R,getBattleJobs:()=>B,getBattleJobs2:()=>k,nameToFullName:e=>S[e]??{full:e,simple2:e.substring(0,2),simple1:e.substring(0,2),en:e},iconToJobEnum:e=>L[e]??0,nameToJobEnum:e=>d[e]??0},f=H;function v(e){if(!e)return{};let n=e.split("?")[1];if(!n)return{};let l=n.split("&");if(!l)return{};let s={};for(let i=0;i<l.length;i++){let o=l[i].split("="),t=o[0],M=o[1];s[t]?(s[t]=Array.isArray(s[t])?s[t]:[s[t]],s[t].push(M)):s[t]=M}return s}const a=v(location.href),b={cafe:"https://cafemaker.wakingsands.com",xivapi:"https://xivapi.com"};var D,J;const c={first:((D=a==null?void 0:a.api)==null?void 0:D.toLowerCase())==="xivapi"?{site:b.xivapi}:{site:b.cafe},second:((J=a==null?void 0:a.api)==null?void 0:J.toLowerCase())==="xivapi"?{site:b.cafe}:{site:b.xivapi}},A={2:{ActionCategoryTargetID:8,Icon:"/i/000000/000123.png"},3:{ActionCategoryTargetID:10,Icon:"/i/000000/000104.png"},4:{ActionCategoryTargetID:5,Icon:"/i/000000/000118.png"},7:{ActionCategoryTargetID:1,Icon:"/i/000000/000101.png"},8:{ActionCategoryTargetID:1,Icon:"/i/000000/000101.png"},25756:{ActionCategoryTargetID:4,Icon:"/i/003000/003090.png"}};async function U(e,n,l=["ID","Icon","ActionCategoryTargetID"]){return Object.hasOwn(A,n)?Promise.resolve(Object.assign({ActionCategoryTargetID:0,ID:n,Icon:"/i/000000/000405.png"},A[n])):await fetch(`${c.first.site}/${e}/${n}?columns=${l.join(",")}`,{mode:"cors"}).then(s=>s.json()).catch(()=>{})||await fetch(`${c.second.site}/${e}/${n}?columns=${l.join(",")}`,{mode:"cors"}).then(s=>s.json()).catch(()=>{})||Promise.resolve({ActionCategoryTargetID:0,ID:n,Icon:"/i/000000/000405.png"})}async function W(e,n=!1){return e.length===0?Promise.resolve(""):h(`${c.first.site}${e}`).catch(()=>h(`${c.second.site}${e}`).catch(()=>Promise.resolve("https://cafemaker.wakingsands.com/i/000000/000405.png"))).then(l=>l.replace(/(\d{6})\/(\d{6})\.png$/,(s,i,o)=>`${i}/${n?"hq/":""}${o}.png`))}async function O(e){return h(`${c.first.site}/cj/companion/${f.nameToFullName(f.jobEnumToJob(e)).en}.png`).catch(()=>h(`${c.second.site}/cj/companion/${f.nameToFullName(f.jobEnumToJob(e)).en}.png`).catch(()=>Promise.resolve("https://cafemaker.wakingsands.com/cj/companion/none.png")))}function h(e){return new Promise(function(n,l){let s=new Image;s.src=e,s.onload=()=>n(e),s.onerror=()=>l()})}async function x(e){return U("action",e,["Icon"]).then(n=>W((n==null?void 0:n.Icon)??""))}async function F(e){const n=/^[\u4e00-\u9fa5]+$/.test(e);return fetch(`https://${n?"cafemaker.wakingsands.com":"xivapi.com"}/search?filters=IsPlayerAction=1,ClassJobLevel>0&indexes=action&string=${encodeURIComponent(e)}`).then(l=>l.json()).then(l=>{var s;return(s=l.Results)==null?void 0:s[0]})}export{f as U,F as a,O as b,x as c,U as d,W as g,a as p};
