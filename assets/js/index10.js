import{c as y}from"./xivapi.js";import{d as P,s as w,x as n,T as l,M as f,O as g,Q as c,U as N,bv as I,bw as b,v as s,S as m,m as v}from"./index.js";import{_ as T}from"./_plugin-vue_export-helper.js";const k=u=>(I("data-v-0399fa4c"),u=u(),b(),u),L={id:"container"},S={key:0},D=k(()=>l("li",{class:"li-head"},[l("aside",null,"秒"),l("h5",null,"邪龙"),l("h5",null,"圣龙")],-1)),F={class:"xie"},B=["src"],C={class:"sheng"},O=["src"],V=P({__name:"index",setup(u){addOverlayListener("LogLine",H),startOverlayEvents();const x={xie:["尼德霍格","ニーズヘッグ","Nidhogg"],sheng:["赫拉斯瓦尔格","フレースヴェルグ","Hraesvelgr"]},i=w({data:[],show:!1}),r={xie:0,sheng:0};let d=0;async function H(e){var _,t,h,o;if(e.line[0]==="20"&&/^6D41$/.test(e.line[4]))i.data.length=0,i.show=!0,i.data.push({xie:[],sheng:[],xieHP:"0",shengHP:"0"}),d=new Date().getTime(),setTimeout(()=>d=0,7700);else if(e.line[0]==="20"&&/^(?:63C8|6D21)$/.test(e.line[4]))i.data.length=0,i.show=!1,i.data.push({xie:[],sheng:[],xieHP:"0",shengHP:"0"});else if(d>0&&(e.line[0]==="21"||e.line[0]==="22")&&((t=(_=e.line)==null?void 0:_[2])==null?void 0:t[0])==="1"&&((o=(h=e.line)==null?void 0:h[6])==null?void 0:o[0])==="4"){if(e.line[4]==="07"||e.line[4]==="08")return;const a=Math.round((new Date().getTime()-d)/1e3);i.data[a]===void 0&&(i.data[a]={xie:[],sheng:[],xieHP:r.xie.toFixed(1),shengHP:r.sheng.toFixed(1)});const p=await y(parseInt(e.line[4],16));x.xie.includes(e.line[7])?(r.xie=Number(e.line[24])/Number(e.line[25])*100,i.data[a].xie.push(p),i.data[a].xieHP=r.xie.toFixed(1)):x.sheng.includes(e.line[7])&&(r.sheng=Number(e.line[24])/Number(e.line[25])*100,i.data[a].sheng.push(p),i.data[a].shengHP=r.sheng.toFixed(1))}}return(e,_)=>(s(),n("div",L,[l("main",null,[f(i).show?(s(),n("ul",S,[D,(s(!0),n(g,null,c(f(i).data,(t,h)=>(s(),n("li",{class:"li-main",key:h},[l("aside",null,m(h),1),l("div",F,[v(m((t==null?void 0:t.xieHP)??"")+"%",1),(s(!0),n(g,null,c(t==null?void 0:t.xie,(o,a)=>(s(),n("img",{key:a,src:o,alt:""},null,8,B))),128))]),l("div",C,[v(m((t==null?void 0:t.shengHP)??"")+"%",1),(s(!0),n(g,null,c(t==null?void 0:t.sheng,(o,a)=>(s(),n("img",{key:a,src:o,alt:""},null,8,O))),128))])]))),128))])):N("",!0)])]))}});const A=T(V,[["__scopeId","data-v-0399fa4c"]]);export{A as default};
